<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_move_form" model="ir.ui.view">
           <field name="name">account.move.Form</field>
           <field name="model">account.move</field>
           <field name="inherit_id" ref="account.view_move_form" />
           <field name="arch" type="xml">

               <xpath expr="//field[@name='partner_bank_id']" position="after" >


                   <!-- Invoice payment terms (only invoices) + due date (only invoices / receipts) -->
                   <div class="o_td_label"
                        attrs="{'invisible': [
                        '|',
                        ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')),
                        ('is_separation_land','!=',True)
                        ]}">
                       <label for="invoice_date_due_separation" string="Fecha Vencimiento Separacion"  />
                       <!--<label for="invoice_payment_term_id" string="Payment terms" attrs="{'invisible': [('invoice_payment_term_id', '=', False)]}"/> -->
                   </div>
                   <div class="d-flex"
                        attrs="{'invisible': [
                                '|',
                                ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')) ,
                                ('is_separation_land','!=',True)
                        ]}"
                   >

                       <field name="days_max_due_separation" />
                       <span class="o_form_label mx-3 oe_edit_only" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('invoice_payment_term_id', '!=', False)]}"> or </span>
                       <field name="invoice_date_due_separation" force_save="1" placeholder="Date" />

                   </div>
                   <field name="mz_land_separation" attrs="{'invisible': [('is_separation_land','!=',True)]}" />
                   <field name="lot_land_separation"  attrs="{'invisible': [('is_separation_land','!=',True)]}" />
               </xpath>


               <xpath expr="//header" position="inside" >
                   <button name="create_sale_if_separation" string="Crear Cotizacion" type="object"
                           attrs="{'invisible' : ['|',('is_separation_land', '=', False),('state','!=','posted')]}" />
               </xpath>

               <xpath expr="//field[@name='qr_code_method']" position="after" >
                   <field name="is_separation_land"  />

               </xpath>

               <xpath expr="//field[@name='narration']" position="replace" >
                   <field name="narration"
                          attrs="{'invisible': [('narration', '=', False)]}"
                          placeholder="Terms and Conditions"
                          colspan="2" nolabel="1"/>

                   <field name="narration_str"  invisible="1" />

                   <field name="narration_text" placeholder="Terms and Conditions"
                          colspan="2" nolabel="1"/>

               </xpath>


               <xpath expr="//page[@name='invoice_tab']" position="inside" >
                   <group>
                       <field name="bank_origin_ids" >
                           <tree editable="bottom"  >
                               <field name="bank_id" />
                               <field name="operation_number" />
                               <field name="date" />

                           </tree>
                       </field>
                   </group>

               </xpath>
           </field>
    </record>


    <record id="view_move_form_odoofact" model="ir.ui.view">
           <field name="name">account.move.Form</field>
           <field name="model">account.move</field>
           <field name="inherit_id" ref="l10n_pe_edi_odoofact.view_move_form" />
           <field name="arch" type="xml">
               <xpath expr="//button[@name='action_document_send']" position="replace" >
                   <button class="oe_stat_button text-info" type="object" name="action_document_send"
                           confirm="Esta Seguro de Enviar? , asegurese revisar el reporte impreso PDF para verificar datos  (puede enviarlo esto al cliente y luego enviarlo a la SUNAT)"
                           icon="fa-cloud-upload" string="Send to SUNAT"
                           attrs="{'invisible': ['|', '|', '|', ('l10n_pe_edi_ose_accepted', '=', True), ('state', '!=', 'posted'), ('l10n_pe_edi_is_einvoice', '=', False), ('l10n_pe_edi_request_id', '=', False)]}"/>

               </xpath>
           </field>
    </record>

    <record id="view_invoice_tree" model="ir.ui.view">
           <field name="name">account.move.Form</field>
           <field name="model">account.move</field>
           <field name="inherit_id" ref="account.view_invoice_tree" />
           <field name="arch" type="xml">
               <xpath expr="//field[@name='invoice_date_due']" position="after" >
                  <field name="invoice_date_due_separation" widget="remaining_days" optional="show"  />

               </xpath>
           </field>
    </record>

</odoo>