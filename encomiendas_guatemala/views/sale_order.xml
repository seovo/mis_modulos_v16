<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_order_form" model="ir.ui.view">
           <field name="name">Pedidos.Form</field>
           <field name="model">sale.order</field>
           <field name="inherit_id" ref="sale.view_order_form" />
           <field name="arch" type="xml">

               <xpath expr="//page[@name='order_lines']" position="attributes">
                    <attribute name="string">Envio</attribute>
                </xpath>

               <xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="replace" >
                   <field name="is_encomienda" column_invisible="1" />
                   <field name="price_unit"  readonly="1"  force_save="1" />
                   <button name="edit_price_jz" type="object" icon="fa-pencil-square-o" invisible="not is_encomienda" />
               </xpath>

               <xpath expr="//field[@name='payment_term_id']" position="after" >
                   <field name="state_encomienda" />
                   <field name="clase_encomienda" />
                   <field name="type_doc_encomienda" />
                   <field name="carrier_id" string="Caja Rural" />
               </xpath>

               <xpath expr="//notebook" position="inside" >
                   <page string="Lista de Empaque"
                         invisible="clase_encomienda != 'mer'"
                         name="packing_list">
                       <field name="packing_list_ids"
                              invisible="clase_encomienda != 'mer'"
                              widget="section_and_note_one2many" >
                           <tree  editable="bottom"  >
                               <control>
                                    <create name="add_product_control" string="Agregar Producto"/>
                                    <create name="add_section_control" string="Agregar SecciÃ³n" context="{'default_display_type': 'line_section'}"/>
                                   <create name="add_note_control" string="Agregar Nota" context="{'default_display_type': 'line_note'}"/> -
                                </control>

                               <field name="sequence" widget="handle"/>

                               <field name="display_type"  column_invisible="True" />

                               <field name="qty" />
                               <field name="type_mercaderia"  />
                               <field name="name" />
                               <field name="code_hds" optional="hide" />

                           </tree>
                       </field>
                   </page>

               </xpath>




           </field>
    </record>



    <record id="edit_sale_order_line" model="ir.ui.view">
           <field name="name">Pedidos.Form</field>
           <field name="model">sale.order.line</field>
           <field name="arch" type="xml">
               <form>
                   <sheet>

                       <field name="encomienda_list"  >
                              <tree  editable="bottom"  >
                               <field name="qty" />
                               <field name="product_id" domain="[('is_tarif_encomienda','=',True)]" widget="selection" />
                               <field name="price_unit" optional="hide" />
                               <field name="precio_cost" optional="hide"  />
                               <field name="peso_real" />
                               <field name="largo" />
                               <field name="ancho" />
                               <field name="alto" />
                               <field name="weight_vol" />
                               <field name="weight_cobrar" sum="Total" />
                               <field name="amount_total" sum="Total" />
                           </tree>
                           </field>


                       <group name="note_group" col="6" class="mt-2 mt-md-0">
                            <group colspan="4">
                                <field name="price_extra_libre"  />
                                <field name="total_peso_cobro" />

                            </group>
                            <group class="oe_subtotal_footer" colspan="2" name="sale_total">
                                <field name="price_fixed"  />
                                <field name="cost_price_cobro"  />
                                <field name="price_total_encomienda"  />
                                <hr /><br />
                                <field name="price_unit"  />
                            </group>
                            <div class="clearfix"/>
                        </group>

                   </sheet>
               </form>
           </field>
    </record>

</odoo>